<%inherit file="layout.html"/>
<%namespace name="partials" file="partials.html"/>

<article>
<section>
% if description:
    <section id="description">${description | h}</section>
% endif
</section>

<section>
<ul class="gallery">
% for photo in photos:
    <li class="hmedia">
        <a rel="enclosure original" type="${photo.get_mimetype() | h}" href="${URL(photo.get_name()) | n,U,h}" title="${photo.get_name() | h}">
        <figure>
            <span class="frame"><img class="thumbnail photo" src="${URL(photo.get_name()).setvars(view='thumbnail', thumb_size=200) | n,U,h}" /></span>
            <figcaption>
                <span class="fn">${photo.get_name() | h}</span>
            </figcaption>
        </figure>
        </a>
    </li>
% endfor
</ul>
</section>

<section>
<table class="list">
<caption>Directory listing</caption>
<thead>
    <tr>
        <th class="filename">Name</th>
    </tr>
</thead>
<tbody>
    % if path:
    <tr class="parent">
        <td class="filename" data-sortname="/"><a href="../">Parent directory</a></td>
    </tr>
    % endif
    % for dir in dirs:
    <tr class="dir">
        <td class="filename" data-sortname="${'/'+dir.get_name() | h}"><a href="${URL(dir.get_name()+'/') | n,U,h}">${dir.get_name() | h}</a>/</td>
    </tr>
    % endfor
</tbody>
</table>
</section>
</article>

<%def name="title(html=False)" filter="cpt">
% if html:
    Gallery of ${partials.breadcrumbs(path)}
% else:
    Gallery of ${path}/
% endif
</%def>

<%def name="header()">
    ${parent.header()}
    ${partials.toolbox()}
</%def>
