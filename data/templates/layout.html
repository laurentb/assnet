<!DOCTYPE html>
<html lang="en">
<head>
    <!--[if lt IE 9]>
    <script src="${root_url.setvar(action='asset', file='html5.js').href}"></script>
    <![endif]-->
    % if available_views:
        ${altrels()}
    % endif
    <title>${capture(self.title, html=False) | cpt}</title>
    % for stylesheet in stylesheets:
        <link rel="stylesheet" type="text/css" href="${root_url.setvar(action='asset', file=stylesheet) | n,U}" />
    % endfor
    % if path:
        <link rel="up" href="../" />
    % endif
    <link rel="top" href="${root_url | n,U}" />
</head>
<body>
    <header>${self.header()}</header>
    ${next.body()}
    <footer>${self.footer()}</footer>
</body>
</html>

<%def name="altrels()">
    <%
    view_links = [(available_view.verbose_name, url.setvar(view=available_view.name)) \
                    for available_view in available_views]
    %>
    % for available_view, view_url in view_links:
        % if available_view == view:
            <link rel="canonical" href="${view_url | n,U}" />
        % else:
            <link rel="alternate" title="Alternate view ${available_view | h}" href="${view_url | n,U}" />
        % endif
    % endfor
</%def>

<%def name="header()">
    <h1>${capture(self.title, html=True) | cpt}</h1>
</%def>

<%def name="footer()">
    <address><a href="http://ass2m.org/">ass2m</a> ${ass2m_version | h}</address>
</%def>
